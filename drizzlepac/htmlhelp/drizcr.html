
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Step 7: Cosmic-ray identification &#8212; DrizzlePac 2.1.22 (15-March-2018) documentation</title>
    <link rel="stylesheet" href="_static/stsci_sphinx.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '2.1.22 (15-March-2018)',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Utilities" href="util.html" />
    <link rel="prev" title="Step 6: Blotting the Median Image" href="ablot.html" /> 
  </head>
  <body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="util.html" title="Utilities"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="ablot.html" title="Step 6: Blotting the Median Image"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">DrizzlePac 2.1.22 (15-March-2018) documentation</a> &#187;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/stsci_logo.png" alt="Logo"/>
            </a></p>
  <h4>Previous topic</h4>
  <p class="topless"><a href="ablot.html"
                        title="previous chapter">Step 6: Blotting the Median Image</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="util.html"
                        title="next chapter">Utilities</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/drizcr.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="step-7-cosmic-ray-identification">
<span id="drizcr"></span><h1>Step 7: Cosmic-ray identification<a class="headerlink" href="#step-7-cosmic-ray-identification" title="Permalink to this headline">¶</a></h1>
<p>The cosmic rays and bad pixels are now identified by comparing the input images with the associated blotted,median-cleaned images created.</p>
<span class="target" id="module-drizzlepac.drizCR"></span><p>Mask blemishes in dithered data by comparison of an image with a model
image and the derivative of the model image.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Authors:</th><td class="field-body">Warren Hack</td>
</tr>
<tr class="field-even field"><th class="field-name">License:</th><td class="field-body"><a class="reference external" href="http://www.stsci.edu/resources/software_hardware/pyraf/LICENSE">http://www.stsci.edu/resources/software_hardware/pyraf/LICENSE</a></td>
</tr>
</tbody>
</table>
<dl class="function">
<dt id="drizzlepac.drizCR.createCorrFile">
<code class="descclassname">drizzlepac.drizCR.</code><code class="descname">createCorrFile</code><span class="sig-paren">(</span><em>outfile</em>, <em>arrlist</em>, <em>template</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/drizzlepac/drizCR.html#createCorrFile"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#drizzlepac.drizCR.createCorrFile" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a _cor file with the same format as the original input image</p>
<p>The DQ array will be replaced with the mask array used to create the _cor
file.</p>
</dd></dl>

<dl class="function">
<dt id="drizzlepac.drizCR.drizCR">
<code class="descclassname">drizzlepac.drizCR.</code><code class="descname">drizCR</code><span class="sig-paren">(</span><em>input=None</em>, <em>configObj=None</em>, <em>editpars=False</em>, <em>**inputDict</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/drizzlepac/drizCR.html#drizCR"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#drizzlepac.drizCR.drizCR" title="Permalink to this definition">¶</a></dt>
<dd><p>The blotted median images that are now transformed back into the original
reference frame, get compared to the original input images to detect any
spurious pixels (which may include pixels impacted by cosmic rays) in
each input. Those spurious pixels then get flagged as ‘bad’ in the output
cosmic ray mask files, which get used as input for the final combination
so that they do not show up in the final product.
The identified bad pixels get flagged by updating the input mask files.
Optionally, copies of the original images with the bad pixels removed
can be created through the use of the <code class="xref py py-obj docutils literal"><span class="pre">driz_cr_corr</span></code> parameter.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong id="input">input</strong> : str or list of str (Default = None)</p>
<blockquote>
<div><p>A python list of blotted median image filenames, or just a single
filename.</p>
</div></blockquote>
<p><strong id="configObj">configObj</strong> : configObject (Default = None)</p>
<blockquote>
<div><p>An instance of <code class="xref py py-obj docutils literal"><span class="pre">configObject</span></code> which overrides default parameter settings.</p>
</div></blockquote>
<p><strong id="editpars">editpars</strong> : bool (Default = False)</p>
<blockquote>
<div><p>A parameter that allows user to edit input parameters by hand in the GUI.
True to use the GUI to edit parameters.</p>
</div></blockquote>
<p><strong id="inputDict">inputDict</strong> : dict, optional</p>
<blockquote>
<div><p>An optional list of parameters specified by the user, which can also
be used to override the defaults.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Other Parameters:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><p class="first"><strong>driz_cr</strong> : bool (Default = False)</p>
<blockquote>
<div><p>Perform cosmic-ray detection? If set to <code class="docutils literal"><span class="pre">True</span></code>, cosmic-rays will be
detected and used to create cosmic-ray masks based on the algorithms
from <code class="xref py py-obj docutils literal"><span class="pre">deriv</span></code> and <code class="xref py py-obj docutils literal"><span class="pre">driz_cr</span></code>.</p>
</div></blockquote>
<p><strong>driz_cr_corr</strong> : bool (Default = False)</p>
<blockquote>
<div><p>Create a cosmic-ray cleaned input image? I set to <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.6)"><code class="xref py py-obj docutils literal"><span class="pre">True</span></code></a>, a cosmic-ray
cleaned <code class="docutils literal"><span class="pre">_cor</span></code> image will be generated directly from the input image,
and a corresponding <code class="docutils literal"><span class="pre">_crmask</span></code> file will be written to document detected
pixels affected by cosmic-rays.</p>
</div></blockquote>
<p><strong>driz_cr_snr</strong> : list of floats (Default = ‘3.5 3.0’)</p>
<blockquote>
<div><p>The values for this parameter specify the signal-to-noise ratios for
the <code class="xref py py-obj docutils literal"><span class="pre">driz_cr</span></code> task to be used in detecting cosmic rays.
See the help file for <code class="xref py py-obj docutils literal"><span class="pre">driz_cr</span></code> for further discussion of this parameter.</p>
</div></blockquote>
<p><strong>driz_cr_grow</strong> : int (Default = 1)</p>
<blockquote>
<div><p>The radius, in pixels, around each detected cosmic-ray,
in which more stringent detection criteria for additional cosmic
rays will be used.</p>
</div></blockquote>
<p><strong>driz_cr_ctegrow</strong> : int (Default = 0)</p>
<blockquote>
<div><p>Length, in pixels, of the CTE tail that should be masked in
the drizzled output.</p>
</div></blockquote>
<p><strong>driz_cr_scale</strong> : str (Default = ‘1.2 0.7’)</p>
<blockquote class="last">
<div><p>Scaling factor applied to the derivative in <code class="xref py py-obj docutils literal"><span class="pre">driz_cr</span></code> when detecting
cosmic-rays. See the help file for <code class="xref py py-obj docutils literal"><span class="pre">driz_cr</span></code> for further discussion
of this parameter.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>These tasks are designed to work together seemlessly when run in the
full <code class="xref py py-obj docutils literal"><span class="pre">AstroDrizzle</span></code> interface. More advanced users may wish to create
specialized scripts for their own datasets, making use of only a subset
of the predefined AstroDrizzle tasks, or add additional processing,
which may be usefull for their particular data. In these cases, individual
access to the tasks is important.</p>
<p>Something to keep in mind is that the full <code class="xref py py-obj docutils literal"><span class="pre">AstroDrizzle</span></code> interface will
make backup copies of your original files and place them in
the <code class="docutils literal"><span class="pre">OrIg/</span></code> directory of your current working directory. If you are
working with the stand alone interfaces, it is assumed that the user
has already taken care of backing up their original datafiles as the
input file with be directly altered.</p>
<p class="rubric">Examples</p>
<p>Basic example of how to call drizCR yourself from a python command line using the default parameters for the task.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">drizzlepac</span> <span class="k">import</span> <span class="n">drizCR</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">drizCR</span><span class="o">.</span><span class="n">drizCR</span><span class="p">(</span><span class="s1">&#39;*flt.fits&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="drizzlepac.drizCR.getHelpAsString">
<code class="descclassname">drizzlepac.drizCR.</code><code class="descname">getHelpAsString</code><span class="sig-paren">(</span><em>docstring=False</em>, <em>show_ver=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/drizzlepac/drizCR.html#getHelpAsString"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#drizzlepac.drizCR.getHelpAsString" title="Permalink to this definition">¶</a></dt>
<dd><p>return useful help from a file in the script directory called
__taskname__.help</p>
</dd></dl>

<dl class="function">
<dt id="drizzlepac.drizCR.help">
<code class="descclassname">drizzlepac.drizCR.</code><code class="descname">help</code><span class="sig-paren">(</span><em>file=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/drizzlepac/drizCR.html#help"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#drizzlepac.drizCR.help" title="Permalink to this definition">¶</a></dt>
<dd><p>Print out syntax help for running astrodrizzle</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong id="file">file</strong> : str (Default = None)</p>
<blockquote class="last">
<div><p>If given, write out help to the filename specified by this parameter
Any previously existing file with this name will be deleted before
writing out the help.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="drizzlepac.drizCR.run">
<code class="descclassname">drizzlepac.drizCR.</code><code class="descname">run</code><span class="sig-paren">(</span><em>configObj</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/drizzlepac/drizCR.html#run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#drizzlepac.drizCR.run" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="drizzlepac.drizCR.rundrizCR">
<code class="descclassname">drizzlepac.drizCR.</code><code class="descname">rundrizCR</code><span class="sig-paren">(</span><em>imgObjList</em>, <em>configObj</em>, <em>procSteps=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/drizzlepac/drizCR.html#rundrizCR"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#drizzlepac.drizCR.rundrizCR" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="drizzlepac.drizCR.setDefaults">
<code class="descclassname">drizzlepac.drizCR.</code><code class="descname">setDefaults</code><span class="sig-paren">(</span><em>configObj={}</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/drizzlepac/drizCR.html#setDefaults"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#drizzlepac.drizCR.setDefaults" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a dictionary of the default parameters
which also been updated with the user overrides.</p>
</dd></dl>

</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="util.html" title="Utilities"
             >next</a> |</li>
        <li class="right" >
          <a href="ablot.html" title="Step 6: Blotting the Median Image"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">DrizzlePac 2.1.22 (15-March-2018) documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2017, Warren Hack, Nadia Dencheva, Chris Sontag, Megan Sosey, Michael Droettboom, Mihai Cara.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.6.3.
    </div>
  </body>
</html>